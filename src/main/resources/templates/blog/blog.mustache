
<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">


<main>
    <div id="blogPageHeaderGrp" class="" >
        <ol class="breadcrumb pull-right"></ol>
        <h1 class="page-header"></h1>
    </div>

    <div id="blogContainer" class="container" >
        <div id="blogSearchHeaderGrp" class="search-form clearfix col-xs-w100" >
            <form class="form-inline"  onsubmit="return false;">

                <div class="input-group col-wms-search-group3">
                    <!--						<span class="input-group-addon col-xs-w25 spanclass" data-domain-id="PDA_USE_YN"></span>
                                            <select id="blogPdaUseYN" class="form-control" >
                                                <option value=""></option>
                                            </select>-->
                </div>

                <!-- 중복되는 부분 -->
                <div class="form-group col-xs-w100 m-b-5">
                    <div class="input-group pull-right">
                        <button type="button" id="blogSearchBtn" type="button"  class="btn btn-sm btn-primary m-r-5">
                            <i class="fa fa-search"></i><!--<i data-domain-id="SEARCH_BTN" >--> 조회</i>
                        </button>
                        <button type="button" id="blogAddBtn" data-authRule="AUTH_NEW"  class="btn btn-sm btn-info m-r-5">
                            <i class="fa fa-plus"></i> <!--<i data-domain-id="MENU_ADD_BTN" >-->추가</i>
                        </button>
                        <button type="button" id="blogUpdateBtn" data-authRule="AUTH_MOD" class="btn btn-sm btn-warning m-r-5">
                            <i class="fa fa-minus"></i> <!--<i data-domain-id="ROW_DEL_BTN" >-->수정</i>
                        </button>
                        <button type="button" id="blogDelBtn" data-authRule="AUTH_DEL" class="btn btn-sm btn-danger m-r-5">
                            <i class="fa fa-minus"></i> <!--<i data-domain-id="ROW_DEL_BTN" >-->삭제</i>
                        </button>
                        <button type="button" id="blogSaveBtn" data-authRule="AUTH_NEW AUTH_MOD AUTH_DEL"  class="btn btn-sm btn-success">
                            <i class="fa fa-download"></i> <!--<i data-domain-id="SAVE_BTN" >-->저장</i>
                        </button>
                        <button type="button" id="blogImgBtn" data-authRule="AUTH_NEW AUTH_MOD AUTH_DEL"  class="btn btn-sm btn-success">
                            <i class="fa fa-download"></i> <!--<i data-domain-id="SAVE_BTN" >-->이미지변환</i>
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <div id="blogHGridGrp" class="col-xs-w100">
            <div>
                <table id="blogGrid"></table>
                <!-- <div id="blogGridNavi"></div> -->
            </div>
        </div>

        <div id="blogSearchDetailGrp" class="search-form clearfix col-xs-w100" >
            <form class="form-inline"  onsubmit="return false;">

                <div class="input-group col-wms-search-group3">
                    <!--						<span class="input-group-addon col-xs-w25 spanclass" data-domain-id="PDA_USE_YN"></span>
                                            <select id="blogPdaUseYN" class="form-control" >
                                                <option value=""></option>
                                            </select>-->
                </div>

                <!-- 중복되는 부분 -->
                <div class="form-group col-xs-w100 m-b-5">
                    <div class="input-group">

                        <input class="form-control" type="text" list="blogCategoryAList" id="blogCategoryA" readonly >
                        <datalist id="blogCategoryAList">
                        </datalist>
                        <span class="input-group-text"> - </span>
                        <input class="form-control" type="text" list="blogCategoryBList" id="blogCategoryB" readonly>
                        <datalist id="blogCategoryBList">
                        </datalist>
                        <span class="input-group-text"> - </span>
                        <input class="form-control" type="text" list="blogCategoryCList" id="blogCategoryC" readonly>
                        <datalist id="blogCategoryCList">
                        </datalist>
                    </div>

                    <div class="input-group">
                        <span class="input-group-text"> 제목 </span>
                        <input type="text" id="blogTitle" placeholder="Title" autocomplete="off" class="form-control"
                               value=""/>
                    </div>

                    <div class="input-group">
                        <span class="input-group-text"> URL </span>
                        <input type="text" id="blogUrl" placeholder="Url" autocomplete="off" class="form-control"
                               value=""/>
                    </div>


                    <div id="blogViewMarkdown">
                        <a href="#" id="raw-switch" class="raw-switch" style="visibility:hidden">Raw: <span></span></a>
                        <aside id="markdown" contenteditable style="visibility:hidden; height:10px;" ></aside>
                        <section class="markdown-body" id="output-html"></section>
                    </div>
                    <div id="blogUpdateMarkdown" >
                        <label class="input-group-text"> 내용 </label>
                        <textarea type="text" rows="4"  id="blogContent" class="form-control"
                              autocomplete="off"></textarea>
                    </div>


                    <div id="blogRe">


                    </div>
                </div>
            </form>
        </div>
    </div>






    <script>


        function parseMd(md){

          //ul
          md = md.replace(/^\s*\n\*/gm, '<ul>\n*');
          md = md.replace(/^(\*.+)\s*\n([^\*])/gm, '$1\n</ul>\n\n$2');
          md = md.replace(/^\*(.+)/gm, '<li>$1</li>');

          //ol
          md = md.replace(/^\s*\n\d\./gm, '<ol>\n1.');
          md = md.replace(/^(\d\..+)\s*\n([^\d\.])/gm, '$1\n</ol>\n\n$2');
          md = md.replace(/^\d\.(.+)/gm, '<li>$1</li>');

          //blockquote
          md = md.replace(/^\>(.+)/gm, '<blockquote>$1</blockquote>');

          //h
          md = md.replace(/[\#]{6}(.+)/g, '<h6>$1</h6>');
          md = md.replace(/[\#]{5}(.+)/g, '<h5>$1</h5>');
          md = md.replace(/[\#]{4}(.+)/g, '<h4>$1</h4>');
          md = md.replace(/[\#]{3}(.+)/g, '<h3>$1</h3>');
          md = md.replace(/[\#]{2}(.+)/g, '<h2>$1</h2>');
          md = md.replace(/[\#]{1}(.+)/g, '<h1>$1</h1>');

          //alt h
          md = md.replace(/^(.+)\n\=+/gm, '<h1>$1</h1>');
          md = md.replace(/^(.+)\n\-+/gm, '<h2>$1</h2>');

          //images
          md = md.replace(/\!\[([^\]]+)\]\(([^\)]+)\)/g, '<img src="$2" alt="$1" />');

          //links
          md = md.replace(/[\[]{1}([^\]]+)[\]]{1}[\(]{1}([^\)\"]+)(\"(.+)\")?[\)]{1}/g, '<a href="$2" title="$4">$1</a>');

          //font styles
          md = md.replace(/[\*\_]{2}([^\*\_]+)[\*\_]{2}/g, '<b>$1</b>');
          md = md.replace(/[\*\_]{1}([^\*\_]+)[\*\_]{1}/g, '<i>$1</i>');
          md = md.replace(/[\~]{2}([^\~]+)[\~]{2}/g, '<del>$1</del>');

          //pre
          md = md.replace(/^\s*\n\`\`\`(([^\s]+))?/gm, '<pre class="$2">');
          md = md.replace(/^\`\`\`\s*\n/gm, '</pre>\n\n');

          //code
          md = md.replace(/[\`]{1}([^\`]+)[\`]{1}/g, '<code>$1</code>');

          //p
          md = md.replace(/^\s*(\n)?(.+)/gm, function(m){
            return  /\<(\/)?(h\d|ul|ol|li|blockquote|pre|img)/.test(m) ? m : '<p>'+m+'</p>';
          });

          //strip p from pre
          md = md.replace(/(\<pre.+\>)\s*\n\<p\>(.+)\<\/p\>/gm, '$1$2');

          return md;

        }
    var rawMode = false;
        mdEl = document.getElementById('markdown'),
        outputEl = document.getElementById('output-html'),
        parse = function(){
          outputEl[rawMode ? "innerText" : "innerHTML"] = parseMd(mdEl.innerText);
        };

    parse();
    mdEl.addEventListener('keyup', parse, false);


    //Raw mode trigger btn
    (function(){

      var trigger = document.getElementById('raw-switch'),
          status = trigger.getElementsByTagName('span')[0],
          updateStatus = function(){
            status.innerText = rawMode ? 'On' : 'Off';
          };

      updateStatus();
      trigger.addEventListener('click', function(e){
        e.preventDefault();
        rawMode = rawMode ? false : true;
        updateStatus();
        parse();
      }, false);

    }());

        </script>

</main>



<script src="/js/core/simplemde.min.js"></script>
<script src="/js/app/blog/blog.js"></script>